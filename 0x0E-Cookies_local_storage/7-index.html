<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>

    <meta charset="utf-8" />
    <title>Task 7</title>

    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous">
    </script>

    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>

    <script type="application/javascript">
        window.onload = function () {
            console.log(sessionStorage)
            let availableItems = ["Shampoo", "Soap", "Sponge", "Water"]
            if (typeof (Storage) !== "undefined") {
                let cont = 1
                createStore()
                displayCart()
            } else {
                alert("Sorry, your browser does not support Web storage. Try again with a better one")
            }
            function getCartFromStorage() {
                let cart = JSON.parse(sessionStorage.cart)
                if (cart) {
                    return cart
                }
                return {}
            }
            function addItemToCart(item) {
                cart = getCartFromStorage()
                cart[item] = 1
                sessionStorage.setItem("cart", JSON.stringify(cart));
                displayCart();
            }
            function removeItemfromCart(item) {
                cart = getCartFromStorage()
                delete cart[item]
                sessionStorage.setItem("cart", JSON.stringify(cart));
                displayCart();
            }
            function clearCart() {
                sessionStorage.cart = {}
                displayCart();
            }
            function createStore() {
                const title1 = document.createElement("h2");
                title1.innerHTML = "Available products:";
                document.body.appendChild(title1);

                const list = document.createElement("ul");
                document.body.appendChild(list);

                for (item of availableItems) {
                    let itemList = document.createElement("li")
                    list.appendChild(itemList);
                    itemList.innerHTML = item;
                    itemList.onclick = () => { addItemToCart(item) };
                }
            }
            function displayCart() {
                const title2 = document.createElement("h2");
                title2.innerHTML = "Your cart:";
                document.body.appendChild(title2);

                const container = document.createElement("div");
                document.body.appendChild(container);

                updateCart();
            }
            function updateCart() {
                const list2 = document.createElement("ul");
                container.appendChild(list2);

                if (getCartFromStorage() == {}) {
                    const item1 = document.createElement("li");
                    item1.innerHTML = "Your cart is empty";
                    list2.appendChild(item1);
                } else {

                }
            }
        }
    </script>

</head>

<body></body>

</html>
